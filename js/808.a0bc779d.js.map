{"version":3,"file":"js/808.a0bc779d.js","mappings":"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","sources":["webpack://bro_app/./src/views/Passport.vue","webpack://bro_app/./src/views/Passport.vue?139e"],"sourcesContent":["<template>\n    <section class=\"create_passport\">\n        <div class=\"cont\">\n            <div class=\"back_btn\">\n                <router-link :to=\"router.options.history.state.back ? router.options.history.state.back : '/account/cosmos'\" class=\"btn\">\n                    <svg class=\"icon\"><use xlink:href=\"/sprite.svg#ic_arrow_hor\"></use></svg>\n                </router-link>\n            </div>\n\n            <!-- <pre>{{ store.account.moonPassport }}</pre> -->\n\n            <div class=\"data_wrap\">\n                <div class=\"data_hide\" id=\"completed_passport\">\n                    <div class=\"data active\">\n                        <div class=\"avatar\">\n                            <input type=\"file\" id=\"avatar\" ref=\"avatar\" accept=\"image/png, image/jpeg\" @change=\"avatarUpload\">\n                            <label for=\"avatar\" class=\"box hide\">\n                                <div class=\"loader_wrap\" v-if=\"!avatarPreview.status\">\n                                    <div class=\"loader\"><span></span></div>\n                                </div>\n\n                                <div class=\"image\" v-else><div>\n                                    <img :src=\"avatarPreview.src\" alt=\"\">\n                                </div></div>\n                            </label>\n\n                            <div class=\"logo\">\n                                <img src=\"../assets/images/black_logo.svg\" alt=\"\">\n\n                                <div class=\"corner corner_top_left\"></div>\n                                <div class=\"corner corner_top_right\"></div>\n                                <div class=\"corner corner_bottom_left\"></div>\n                                <div class=\"corner corner_bottom_right\"></div>\n                            </div>\n                        </div>\n\n                        <form class=\"info\">\n                            <div class=\"line\">\n                                <div class=\"field\">\n                                    <div class=\"label\">\n                                        {{ $t('message.passport_address_exp') }}\n                                    </div>\n\n                                    <input type=\"text\" :value=\"data.moonAddress.slice(0, 13) + '...' + data.moonAddress.slice(-6)\" class=\"input\" readonly>\n                                </div>\n                            </div>\n\n                            <div class=\"line\" :class=\"{ 'error': data.nickNameError }\">\n                                <div class=\"field\">\n                                    <div class=\"label\">\n                                        {{ $t('message.passport_name_label') }}\n                                    </div>\n\n                                    <input class=\"input\" type=\"text\" name=\"name\" maxlength=\"16\" v-model=\"data.nickName\" @input=\"validateName\" :readonly=\"!data.editNickname\">\n\n                                    <button type=\"button\" class=\"edit_btn\" @click=\"enableEditNickname()\" v-if=\"!data.editNickname && !data.status\">\n                                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\">\n                                        <path d=\"M9.57716 3.76801L10.5638 2.78134C10.6876 2.65747 10.8347 2.55921 10.9965 2.49217C11.1583 2.42513 11.3317 2.39062 11.5068 2.39062C11.682 2.39062 11.8554 2.42513 12.0172 2.49217C12.179 2.55921 12.326 2.65747 12.4498 2.78134L13.3925 3.72401C13.6425 3.97404 13.7829 4.31312 13.7829 4.66667C13.7829 5.02023 13.6425 5.3593 13.3925 5.60934L12.4058 6.59601M9.57716 3.76801L3.16649 10.178C2.94515 10.3994 2.80874 10.6915 2.78116 11.0033L2.61983 12.83C2.61116 12.9271 2.6239 13.0249 2.65714 13.1166C2.69039 13.2082 2.74333 13.2915 2.81223 13.3604C2.88114 13.4294 2.96433 13.4824 3.05595 13.5158C3.14757 13.5491 3.24538 13.5619 3.34249 13.5533L5.16916 13.392C5.48144 13.3647 5.77413 13.2283 5.99583 13.0067L12.4058 6.59601M9.57716 3.76801L12.4058 6.59601\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" fill=\"none\"/>\n                                        </svg>\n                                    </button>\n\n                                    <template v-else>\n                                    <button type=\"submit\" class=\"submit_btn\" @click.prevent=\"updateNickname()\">\n                                        <svg class=\"icon\"><use xlink:href=\"/sprite.svg#ic_check\"></use></svg>\n                                    </button>\n\n                                    <button type=\"button\" class=\"cancel_btn\" @click.prevent=\"disableEditNickname()\">\n                                        <svg class=\"icon\"><use xlink:href=\"/sprite.svg#ic_close\"></use></svg>\n                                    </button>\n                                    </template>\n                                </div>\n                            </div>\n\n                            <div class=\"line citizenship\">\n                                <div class=\"field\">\n                                    <div class=\"label\">\n                                        {{ $t('message.passport_citizenship_label') }}\n                                    </div>\n\n                                    <div class=\"text\" v-html=\"$t('message.passport_citizenship_text')\"></div>\n\n                                    <img src=\"../assets/images/passport_citizenship.svg\" alt=\"\" class=\"img\">\n                                </div>\n                            </div>\n                        </form>\n\n\n                        <div class=\"bg_line\">\n                            <div class=\"corner corner_top_left\"></div>\n                            <div class=\"corner corner_top_right\"></div>\n                            <div class=\"corner corner_bottom_left\"></div>\n                            <div class=\"corner corner_bottom_right\"></div>\n                        </div>\n\n                        <div class=\"bg_left\"></div>\n                        <div class=\"bg_right\"></div>\n                        <div class=\"bg_bottom\"></div>\n\n                        <div class=\"gradient\" :style=\"{ 'background': data.bgGradient }\"></div>\n                    </div>\n                </div>\n            </div>\n\n\n            <div class=\"bottom_btns\" v-if=\"data.showDownloadBtn\">\n                <label for=\"avatar\" class=\"btn change_image_btn\" v-if=\"!avatarPreview.buffer.length || data.status\">\n                    {{ $t('message.change_image_btn') }}\n                </label>\n\n                <button class=\"btn update_btn\" v-else @click.prevent=\"updatePassport()\">\n                    {{ $t('message.update_btn') }}\n                </button>\n\n                <a :href=\"data.passportImage\" download=\"my_passport.png\" class=\"btn download_btn\">\n                    {{ $t('message.download_png_btn') }}\n                </a>\n            </div>\n        </div>\n    </section>\n</template>\n\n\n<script setup>\n    import { ref, reactive, inject, onBeforeMount, watchEffect } from 'vue'\n    import { useGlobalStore } from '@/stores'\n    import { useRouter } from 'vue-router'\n    import { useNotification } from '@kyvg/vue3-notification'\n    import * as htmlToImage from 'html-to-image'\n    import { toJpeg } from 'html-to-image'\n    import gradient from 'random-gradient'\n    import { preparePassportTx, sendTx } from '@/utils'\n\n    const store = useGlobalStore(),\n        i18n = inject('i18n'),\n        notification = useNotification(),\n        router = useRouter(),\n        avatar = ref(null),\n        avatarPreview = reactive({\n            src: '',\n            buffer: '',\n            status: false\n        }),\n        data = reactive({\n            moonAddress: store.account.moonPassportOwnerAddress,\n            nickName: '',\n            nickNameError: false,\n            passportImage: '',\n            status: false,\n            bgGradient: '',\n            showDownloadBtn: false,\n            editNickname: false\n        })\n\n\n    onBeforeMount(() => {\n        // Set default notification\n        store.tooltip = i18n.global.t('message.notice_default_account_passport')\n\n        // Set data from passport\n        data.nickName = store.account.moonPassportOwner.extension.nickname\n\n        // Generate gradient\n        data.bgGradient = gradient(data.nickName)\n    })\n\n\n    watchEffect(() => {\n        // Monitor the IPFSStatus\n        if(store.IPFSStatus) {\n            let delay = 0\n\n            if(!store.account.avatar) {\n                delay = 5100\n            }\n\n            setTimeout(() => {\n                avatarPreview.src = store.account.avatar\n                avatarPreview.status = true\n\n                // Create passport image\n                htmlToImage.toJpeg(document.getElementById('completed_passport'), { quality: 1 })\n                    .then(dataUrl => {\n                        data.passportImage = dataUrl\n                        data.showDownloadBtn = true\n                    })\n                    .catch(error => console.error(error))\n            }, delay)\n        }\n    })\n\n\n    // Enable edit nickname\n    function enableEditNickname() {\n        let input = event.target.closest('.line').querySelector('.input')\n\n        data.editNickname = true\n\n        // Focus on input\n        setTimeout(() => input.focus())\n    }\n\n\n    // Disable edit nickname\n    function disableEditNickname() {\n        data.editNickname = false\n\n        // Set nickName from passport\n        data.nickName = store.account.moonPassportOwner.extension.nickname\n    }\n\n\n    // Avatar upload\n    function avatarUpload () {\n        let formData = new FormData()\n\n        // Reset preview\n        avatarPreview.status = false\n\n        // File size valdate\n        if(avatar.value.files[0].size / 1024 / 1024 <= 5){\n            formData.append('avatar', avatar.value.files[0])\n\n            // Get preview\n            let reader = new FileReader()\n\n            reader.onload = async () => {\n                avatarPreview.buffer = Buffer(reader.result)\n                avatarPreview.src = reader.result\n                avatarPreview.status = true\n            }\n\n            reader.readAsDataURL(avatar.value.files[0])\n        } else {\n            // Show notification\n            notification.notify({\n                group: 'default',\n                durartion: 5000,\n                title: i18n.global.t('message.notification_error_file_size_title'),\n                text: i18n.global.t('message.notification_error_file_size_text', {'size': '5mb'}),\n                type: 'error'\n            })\n        }\n    }\n\n\n    // Update passport\n    async function updatePassport() {\n        // Show notification\n        notification.notify({\n            group: 'default',\n            duration: -100,\n            title: i18n.global.t('message.notification_passport_update_process')\n        })\n\n        data.status = true\n\n        try{\n            // Send avatar to IPFS\n            let avatarIpfs = await store.node.add(avatar.value.files[0])\n\n            // Prepare Tx\n            let prepareResult = await preparePassportTx({\n                update_avatar: {\n                    new_avatar: avatarIpfs.path,\n                    nickname: data.nickName\n                }\n            })\n\n            // Send Tx\n            let result = await sendTx(prepareResult)\n\n            if (result.code === 0) {\n                // Set TXS\n                store.lastTXS = result.transactionHash\n\n                // Show notification\n                notification.notify({\n                    group: 'default',\n                    clean: true\n                })\n\n                notification.notify({\n                    group: store.networks.bostrom.denom,\n                    title: i18n.global.t('message.notification_success_update_passport_title'),\n                    type: 'success',\n                    data: {\n                        chain: 'bostrom',\n                        tx_type: i18n.global.t('message.notification_action_update_passport')\n                    }\n                })\n\n                // Clear buffer\n                avatarPreview.buffer = ''\n\n                // Create passport image\n                htmlToImage.toJpeg(document.getElementById('completed_passport'), { quality: 1 })\n                    .then(dataUrl => data.passportImage = dataUrl)\n                    .catch(error => console.error(error))\n\n                // Get moon passport\n                store.getMoonPassport()\n                store.getOwnerMoonPassport()\n\n                // Set avatar\n                store.account.avatar = avatarPreview.src\n            }\n\n            if (result.code) {\n                // Show notification\n                notification.notify({\n                    group: 'default',\n                    clean: true\n                })\n\n                notification.notify({\n                    duration: -100,\n                    group: store.networks.bostrom.denom,\n                    title: i18n.global.t('message.notification_failed_title'),\n                    text: result?.rawLog.toString(),\n                    type: 'error',\n                    data: {\n                        chain: 'bostrom',\n                        tx_type: i18n.global.t('message.notification_action_update_passport')\n                    }\n                })\n            }\n        } catch (error) {\n            console.log(error)\n\n            // Show notification\n            notification.notify({\n                group: 'default',\n                clean: true\n            })\n\n            notification.notify({\n                group: store.networks.bostrom.denom,\n                title: i18n.global.t('message.notification_failed_title'),\n                text: i18n.global.t('message.manage_modal_error_rejected'),\n                type: 'error',\n                data: {\n                    chain: 'bostrom',\n                    tx_type: i18n.global.t('message.notification_action_update_passport')\n                }\n            })\n        }\n\n        data.status = false\n    }\n\n\n    // Validate nickname\n    function validateName(event) {\n        event.target.value.length < 8\n            ? data.nickNameError = true\n            : data.nickNameError = false\n\n        // Set in loclstorage\n        store.account.tempUserName = event.target.value\n    }\n\n\n    // Nickname availability check\n    async function checkNickname() {\n        try {\n            let response = await store.jsCyber.queryContractSmart(\n                store.CONTRACT_ADDRESS_PASSPORT,\n                {\n                    passport_by_nickname: {\n                        nickname: data.nickName\n                    }\n                }\n            )\n\n            return response\n        } catch (error) {\n            console.log(error)\n\n            return null\n        }\n    }\n\n\n    // Update nickname\n    async function updateNickname() {\n        if(await checkNickname() == null) {\n            // Show notification\n            notification.notify({\n                group: 'default',\n                duration: -100,\n                title: i18n.global.t('message.notification_passport_update_process')\n            })\n\n            data.status = true\n\n            // Disable edit nickname\n            data.editNickname = false\n\n            try{\n                // Prepare Tx\n                let prepareResult = await preparePassportTx({\n                    update_name: {\n                        new_nickname: data.nickName,\n                        old_nickname: store.account.moonPassportOwner.extension.nickname\n                    }\n                })\n\n                // Send Tx\n                let result = await sendTx(prepareResult)\n\n                if (result.code === 0) {\n                    // Set TXS\n                    store.lastTXS = result.transactionHash\n\n                    // Show notification\n                    notification.notify({\n                        group: 'default',\n                        clean: true\n                    })\n\n                    notification.notify({\n                        group: store.networks.bostrom.denom,\n                        title: i18n.global.t('message.notification_success_update_passport_title'),\n                        type: 'success',\n                        data: {\n                            chain: 'bostrom',\n                            tx_type: i18n.global.t('message.notification_action_update_passport')\n                        }\n                    })\n\n                    // Generate gradient\n                    data.bgGradient = gradient(data.nickName)\n\n                    // Create passport image\n                    htmlToImage.toJpeg(document.getElementById('completed_passport'), { quality: 1 })\n                        .then(dataUrl => data.passportImage = dataUrl)\n                        .catch(error => console.error(error))\n\n                    // Get moon passport\n                    await store.getMoonPassport()\n                    await store.getOwnerMoonPassport()\n                }\n\n                if (result.code) {\n                    // Show notification\n                    notification.notify({\n                        group: 'default',\n                        clean: true\n                    })\n\n                    notification.notify({\n                        duration: -100,\n                        group: store.networks.bostrom.denom,\n                        title: i18n.global.t('message.notification_failed_title'),\n                        text: result?.rawLog.toString(),\n                        type: 'error',\n                        data: {\n                            chain: 'bostrom',\n                            tx_type: i18n.global.t('message.notification_action_update_passport')\n                        }\n                    })\n                }\n            } catch (error) {\n                console.log(error)\n\n                // Show notification\n                notification.notify({\n                    group: 'default',\n                    clean: true\n                })\n\n                notification.notify({\n                    group: store.networks.bostrom.denom,\n                    title: i18n.global.t('message.notification_failed_title'),\n                    text: i18n.global.t('message.manage_modal_error_rejected'),\n                    type: 'error',\n                    data: {\n                        chain: 'bostrom',\n                        tx_type: i18n.global.t('message.notification_action_update_passport')\n                    }\n                })\n            }\n\n            data.status = false\n        } else {\n            // Show notification\n            notification.notify({\n                group: 'default',\n                durartion: 5000,\n                title: i18n.global.t('message.notification_error_nickName_title'),\n                text: i18n.global.t('message.notification_error_nickName_desc'),\n                type: 'error'\n            })\n\n            data.nickNameError = true\n        }\n    }\n</script>\n\n\n<style>\n    .create_passport\n    {\n        display: flex;\n\n        padding-bottom: 40px;\n\n        justify-content: center;\n        align-items: center;\n        align-content: center;\n        flex-wrap: wrap;\n        flex: 1 0 auto;\n    }\n\n\n\n    .create_passport .back_btn\n    {\n        margin-bottom: 8px;\n    }\n\n\n    .create_passport .back_btn .btn\n    {\n        color: currentColor;\n\n        display: flex;\n\n        width: 36px;\n        height: 36px;\n\n        transition: background .2s linear;\n        text-decoration: none;\n\n        border-radius: 50%;\n        background: #141414;\n\n        justify-content: center;\n        align-items: center;\n        align-content: center;\n        flex-wrap: wrap;\n    }\n\n\n    .create_passport .back_btn .icon\n    {\n        display: block;\n\n        width: 14px;\n        height: 14px;\n    }\n\n\n    .create_passport .back_btn .btn:hover\n    {\n        background: #950fff;\n    }\n\n\n    .create_passport .data_wrap\n    {\n        position: relative;\n\n        width: 974px;\n        max-width: 100%;\n        margin-right: auto;\n        margin-left: auto;\n    }\n\n\n    .create_passport .data\n    {\n        position: relative;\n        z-index: 3;\n\n        display: flex;\n\n        height: 579px;\n        padding: 40px 48px 45px 92px;\n\n        border-radius: 15px;\n        background: #151515;\n        box-shadow: 0 4px 0 #1f1c1c, inset 0 1px 0 rgba(91, 91, 91, .13);\n\n        justify-content: space-between;\n        align-items: flex-start;\n        align-content: flex-start;\n        flex-wrap: wrap;\n    }\n\n\n    .create_passport .data_hide\n    {\n        overflow: hidden;\n\n        border-radius: 15px;\n        background: var(--bg);\n    }\n\n\n    .create_passport .data .gradient\n    {\n        position: absolute;\n        z-index: 1;\n        top: -50%;\n        left: -50%;\n\n        width: 200%;\n        height: 200%;\n\n        animation: spin 10s linear infinite;\n        pointer-events: none;\n\n        opacity: .8;\n        border-radius: inherit;\n\n        background-blend-mode: overlay, screen, difference, normal;\n    }\n\n\n    .create_passport .data .bg_line\n    {\n        position: absolute;\n        z-index: 3;\n        top: 98px;\n        left: 0;\n\n        width: 66px;\n        height: 12px;\n\n        background: var(--bg);\n        box-shadow: 0 -4px 0 #1f1c1c;\n    }\n\n\n    .create_passport .data .bg_line .corner\n    {\n        position: absolute;\n\n        width: 9px;\n        height: 9px;\n\n        background: url(../assets/images/corner_big.svg) 100% 0/9px 9px no-repeat;\n    }\n\n\n    .create_passport .data .bg_line .corner_top_left\n    {\n        bottom: 100%;\n        left: 0;\n\n        transform: rotate(-180deg);\n    }\n\n\n    .create_passport .data .bg_line .corner_top_right\n    {\n        right: -1px;\n        bottom: 100%;\n\n        transform: rotate(90deg);\n    }\n\n\n    .create_passport .data .bg_line .corner_bottom_left\n    {\n        top: 100%;\n        left: 0;\n\n        transform: rotate(-90deg);\n    }\n\n\n    .create_passport .data .bg_line .corner_bottom_right\n    {\n        top: 100%;\n        right: 4px;\n    }\n\n\n    .create_passport .data .bg_left\n    {\n        position: absolute;\n        z-index: 2;\n        bottom: 90px;\n        left: -22px;\n\n        display: block;\n\n        width: 40px;\n        height: 162px;\n\n        content: '';\n        pointer-events: none;\n\n        border-radius: 0 33px 33px 0;\n        background: var(--bg);\n        box-shadow: inset 0 4px 0 #1f1c1c, inset 0 4px 0 #3c3c3c;\n    }\n\n    .create_passport .data .bg_left:after\n    {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n\n        display: block;\n\n        width: 22px;\n        height: 100%;\n\n        content: '';\n\n        background: var(--bg);\n    }\n\n\n    .create_passport .data .bg_right\n    {\n        position: absolute;\n        z-index: 2;\n        top: 200px;\n        right: -22px;\n\n        display: block;\n\n        width: 40px;\n        height: 162px;\n\n        content: '';\n        pointer-events: none;\n\n        border-radius: 33px 0 0 33px;\n        background: var(--bg);\n        box-shadow: inset 0 4px 0 #1f1c1c, inset 0 4px 0 #3c3c3c;\n    }\n\n    .create_passport .data .bg_right:after\n    {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n\n        display: block;\n\n        width: 22px;\n        height: 100%;\n\n        content: '';\n\n        background: var(--bg);\n    }\n\n\n    .create_passport .data .bg_bottom\n    {\n        position: absolute;\n        z-index: 2;\n        right: 224px;\n        bottom: -22px;\n\n        display: block;\n\n        width: 252px;\n        height: 34px;\n\n        content: '';\n        pointer-events: none;\n\n        border-radius: 33px 33px 0 0;\n        background: var(--bg);\n        box-shadow: inset 0 4px 0 #1f1c1c, inset 0 4px 0 #3c3c3c;\n    }\n\n    .create_passport .data .bg_bottom:after\n    {\n        position: absolute;\n        bottom: -4px;\n        left: 0;\n\n        display: block;\n\n        width: 100%;\n        height: 22px;\n\n        content: '';\n\n        background: var(--bg);\n    }\n\n\n\n    .create_passport .avatar\n    {\n        position: relative;\n        z-index: 3;\n\n        display: flex;\n        flex-direction: column;\n\n        width: 342px;\n        height: 342px;\n        margin-top: 30px;\n        margin-bottom: 114px;\n\n        transition: background .2s linear;\n    }\n\n    .create_passport .avatar:before\n    {\n        position: absolute;\n        z-index: -1;\n        top: -30px;\n        left: -30px;\n\n        display: block;\n\n        width: calc(100% + 60px);\n        height: calc(100% + 60px);\n\n        content: '';\n\n        border-radius: 70px;\n        background: var(--bg);\n        box-shadow: inset 0 4px 0 #1f1c1c, inset 0 4px 0 #3c3c3c;\n    }\n\n\n    .create_passport .avatar input\n    {\n        display: none;\n    }\n\n\n    .create_passport .avatar label\n    {\n        display: flex;\n\n        padding: 24px;\n\n        cursor: pointer;\n        text-align: center;\n\n        justify-content: center;\n        align-items: center;\n        align-content: center;\n        flex-wrap: wrap;\n    }\n\n    .create_passport .avatar .box\n    {\n        position: relative;\n\n        border-radius: 40px;\n        background: #252525;\n        box-shadow: 0 4px 0 #1f1c1c, 0 4px 0 #3c3c3c, inset 0 1px 0 rgba(91, 91, 91, .13);\n\n        flex: 1 0 auto;\n    }\n\n\n    /* .create_passport .avatar .icon\n                                                                        {\n                                                                            position: relative;\n\n                                                                            width: 18px;\n                                                                            height: 18px;\n                                                                            margin: 0 auto 8px;\n                                                                        }\n\n                                                                        .create_passport .avatar .icon:before,\n                                                                        .create_passport .avatar .icon:after\n                                                                        {\n                                                                            position: absolute;\n\n                                                                            display: block;\n\n                                                                            width: 100%;\n                                                                            height: 2px;\n                                                                            margin: auto;\n\n                                                                            content: '';\n\n                                                                            background: #950fff;\n\n                                                                            inset: 0;\n                                                                        }\n\n                                                                        .create_passport .avatar .icon:after\n                                                                        {\n                                                                            width: 2px;\n                                                                            height: 100%;\n                                                                        }\n\n\n                                                                        .create_passport .avatar .label\n                                                                        {\n                                                                            color: #950fff;\n                                                                            font-family: var(--font_family2);\n                                                                            font-size: 24px;\n                                                                            font-weight: 500;\n                                                                            line-height: 100%;\n\n                                                                            width: 100%;\n\n                                                                            text-transform: uppercase;\n                                                                        }\n\n\n                                                                        .create_passport .avatar .exp\n                                                                        {\n                                                                            color: #4d4d4d;\n                                                                            line-height: 130%;\n\n                                                                            width: 100%;\n                                                                            margin-top: 8px;\n                                                                        } */\n\n\n    .create_passport .avatar .image\n    {\n        position: absolute;\n        z-index: 5;\n        top: 0;\n        left: 0;\n\n        overflow: hidden;\n\n        width: 100%;\n        height: 100%;\n\n        border-radius: 40px;\n    }\n\n    .create_passport .avatar .image div\n    {\n        position: absolute;\n        top: 0;\n        left: 0;\n\n        overflow: hidden;\n\n        width: 100%;\n        height: 100%;\n    }\n\n\n    .create_passport .avatar .image img\n    {\n        position: absolute;\n        top: 0;\n        left: 0;\n\n        display: block;\n\n        width: 342px;\n        height: 342px;\n\n        object-fit: cover;\n    }\n\n\n    .create_passport .avatar .logo\n    {\n        position: absolute;\n        top: 100%;\n        left: 50%;\n\n        display: flex;\n\n        width: 160px;\n        height: 138px;\n        margin-top: 26px;\n\n        transform: translateX(-50%);\n\n        border-radius: 60px;\n\n        justify-content: center;\n        align-items: center;\n        align-content: center;\n        flex-wrap: wrap;\n    }\n\n    .create_passport .avatar .logo:before\n    {\n        position: absolute;\n        z-index: 2;\n        top: 0;\n        left: 0;\n\n        display: block;\n\n        width: 100%;\n        height: 100%;\n\n        content: '';\n        transition: background .2s linear;\n\n        border-radius: 60px;\n        background: #fff;\n        box-shadow: 0 4px 0 #1f1c1c, inset 0 1px 0 rgba(91, 91, 91, .13);\n    }\n\n    .create_passport .avatar .logo:after\n    {\n        position: absolute;\n        z-index: 1;\n        top: -11px;\n        left: -11px;\n\n        display: block;\n\n        width: calc(100% + 22px);\n        height: calc(100% + 22px);\n\n        content: '';\n        transition: background .2s linear;\n\n        background: var(--bg);\n    }\n\n\n    .create_passport .avatar .logo img\n    {\n        position: relative;\n        z-index: 3;\n\n        display: block;\n\n        width: 126px;\n        max-width: 100%;\n        height: 117px;\n        max-height: 100%;\n    }\n\n\n    .create_passport .avatar .logo .corner\n    {\n        position: absolute;\n\n        width: 20px;\n        height: 20px;\n\n        background: url(../assets/images/corner_big.svg) 100% 0/15px 16px no-repeat;\n    }\n\n\n    .create_passport .avatar .logo .corner_top_left\n    {\n        top: 4px;\n        right: 100%;\n\n        margin-right: 11px;\n    }\n\n\n    .create_passport .avatar .logo .corner_top_right\n    {\n        top: 4px;\n        left: 100%;\n\n        margin-left: 11px;\n\n        transform: scale(-1, 1);\n    }\n\n\n    .create_passport .avatar .logo .corner_bottom_left\n    {\n        right: 100%;\n        bottom: -3px;\n\n        margin-right: 11px;\n\n        transform: scale(1, -1);\n    }\n\n\n    .create_passport .avatar .logo .corner_bottom_right\n    {\n        bottom: -3px;\n        left: 100%;\n\n        margin-left: 11px;\n\n        transform: rotate(-180deg);\n    }\n\n\n    .create_passport .info\n    {\n        position: relative;\n        z-index: 3;\n\n        display: flex;\n        flex-direction: column;\n\n        width: 416px;\n        max-width: 100%;\n        min-height: 478px;\n        margin-left: auto;\n    }\n\n\n    .create_passport .info ::-webkit-input-placeholder\n    {\n        color: #464646;\n    }\n\n    .create_passport .info :-moz-placeholder\n    {\n        color: #464646;\n    }\n\n    .create_passport .info ::-moz-placeholder\n    {\n        color: #464646;\n\n        opacity: 1;\n    }\n\n    .create_passport .info :-ms-input-placeholder\n    {\n        color: #464646;\n    }\n\n\n    .create_passport .info .line\n    {\n        position: relative;\n\n        margin-bottom: 12px;\n        padding: 14px;\n\n        transition: .2s linear;\n\n        border-radius: 16px;\n        background: rgba(0, 0, 0, .23);\n        box-shadow: 0 4px 0 rgba(1, 1, 1, .3);\n    }\n\n    .create_passport .info .line.error\n    {\n        box-shadow: 0 4px 0  #eb5757;\n    }\n\n\n    .create_passport .info .input\n    {\n        color: #fff;\n        font-family: var(--font_family2);\n        font-size: 24px;\n        font-weight: 500;\n\n        display: block;\n\n        width: 100%;\n        height: 28px;\n\n        text-transform: lowercase;\n\n        border: none;\n        background: none;\n    }\n\n\n    .create_passport .info .edit_btn\n    {\n        position: absolute;\n        right: 14px;\n        bottom: 14px;\n\n        display: flex;\n\n        width: 24px;\n        height: 24px;\n\n        justify-content: center;\n        align-items: center;\n        align-content: center;\n        flex-wrap: wrap;\n    }\n\n    .create_passport .info .edit_btn svg\n    {\n        display: block;\n\n        width: 24px;\n        height: 24px;\n\n        pointer-events: none;\n    }\n\n\n    .create_passport .info .submit_btn\n    {\n        position: absolute;\n        z-index: 3;\n        right: 42px;\n        bottom: 14px;\n\n        display: flex;\n\n        width: 24px;\n        height: 24px;\n\n        justify-content: center;\n        align-items: center;\n        align-content: center;\n        flex-wrap: wrap;\n    }\n\n    .create_passport .info .submit_btn .icon\n    {\n        display: block;\n\n        width: 24px;\n        height: 24px;\n    }\n\n\n    .create_passport .info .cancel_btn\n    {\n        position: absolute;\n        z-index: 3;\n        right: 14px;\n        bottom: 14px;\n\n        display: flex;\n\n        width: 24px;\n        height: 24px;\n        margin: auto;\n\n        justify-content: center;\n        align-items: center;\n        align-content: center;\n        flex-wrap: wrap;\n    }\n\n    .create_passport .info .cancel_btn .icon\n    {\n        display: block;\n\n        width: 24px;\n        height: 24px;\n    }\n\n\n    .create_passport .info .citizenship\n    {\n        position: relative;\n    }\n\n\n    .create_passport .info .citizenship .text\n    {\n        color: #fdfdfd;\n        font-family: var(--font_family2);\n        font-size: 24px;\n        font-weight: 500;\n        line-height: 100%;\n\n        width: 191px;\n        max-width: 100%;\n        margin-top: 155px;\n\n        text-transform: uppercase;\n    }\n\n\n    .create_passport .info .citizenship .img\n    {\n        position: absolute;\n        top: 14px;\n        right: 14px;\n\n        display: block;\n\n        width: 212px;\n        max-width: 100%;\n        height: 256px;\n        max-height: calc(100% - 19px);\n\n        pointer-events: none;\n    }\n\n\n    .create_passport .info .label\n    {\n        line-height: 130%;\n\n        margin-bottom: 14px;\n\n        opacity: .4;\n    }\n\n\n\n    .create_passport .bottom_btns\n    {\n        display: flex;\n\n        height: 72px;\n        margin-top: 40px;\n\n        justify-content: center;\n        align-items: center;\n        align-content: center;\n        flex-wrap: wrap;\n    }\n\n    .create_passport .bottom_btns > * + *\n    {\n        margin-left: 20px;\n    }\n\n\n    .create_passport .bottom_btns .btn\n    {\n        color: #950fff;\n        font-family: var(--font_family2);\n        font-size: 24px;\n        font-weight: 700;\n        line-height: 70px;\n\n        display: block;\n\n        padding: 0 11px;\n\n        cursor: pointer;\n        text-decoration: none;\n        text-transform: uppercase;\n\n        border: 1px solid #950fff;\n        border-radius: 16px;\n        background: #151515;\n        box-shadow: 0 4px 0 #5a1e89;\n    }\n\n    .create_passport .bottom_btns .download_btn\n    {\n        color: #fff;\n\n        background: #950fff;\n    }\n\n\n\n    @keyframes spin\n    {\n        100%\n        {\n            transform: rotate(360deg);\n        }\n    }\n\n</style>","import script from \"./Passport.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Passport.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Passport.vue?vue&type=style&index=0&id=204fb379&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["store","useGlobalStore","i18n","inject","notification","useNotification","router","useRouter","avatar","ref","avatarPreview","reactive","src","buffer","status","data","moonAddress","account","moonPassportOwnerAddress","nickName","nickNameError","passportImage","bgGradient","showDownloadBtn","editNickname","enableEditNickname","input","event","target","closest","querySelector","setTimeout","focus","disableEditNickname","moonPassportOwner","extension","nickname","avatarUpload","formData","FormData","value","files","size","append","reader","FileReader","onload","async","Buffer","result","readAsDataURL","notify","group","durartion","title","global","t","text","type","updatePassport","duration","avatarIpfs","node","add","prepareResult","preparePassportTx","update_avatar","new_avatar","path","sendTx","code","lastTXS","transactionHash","clean","networks","bostrom","denom","chain","tx_type","htmlToImage","document","getElementById","quality","then","dataUrl","catch","error","console","getMoonPassport","getOwnerMoonPassport","rawLog","toString","log","validateName","length","tempUserName","checkNickname","response","jsCyber","queryContractSmart","CONTRACT_ADDRESS_PASSPORT","passport_by_nickname","updateNickname","update_name","new_nickname","old_nickname","gradient","onBeforeMount","tooltip","watchEffect","IPFSStatus","delay","__exports__"],"sourceRoot":""}